#include "data_processor.h"
#include "sll.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "stm32g4xx.h"
#include "stm32g4xx_hal.h"
#include <command_handler.h>
#include <math.h>

List *lp;

char mock_csv[] = "0\n"
                  "0.03125\n"
                  "0\n"
                  "0\n"
                  "0.078125\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.0625\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.0625\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0\n"
                  "0.078125\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.109375\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.015625\n"
                  "-0.015625\n"
                  "0.015625\n"
                  "0.03125\n"
                  "-0.03125\n"
                  "0.015625\n"
                  "0\n"
                  "-0.046875\n"
                  "0\n"
                  "0.09375\n"
                  "0.046875\n"
                  "0.0625\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "-0.015625\n"
                  "0.0625\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0\n"
                  "0.03125\n"
                  "0\n"
                  "0.0625\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.078125\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0\n"
                  "0.046875\n"
                  "0\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0\n"
                  "0\n"
                  "0\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.03125\n"
                  "-0.015625\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.09375\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0\n"
                  "0\n"
                  "0\n"
                  "0\n"
                  "0.0625\n"
                  "0.0625\n"
                  "0.0625\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0\n"
                  "-0.046875\n"
                  "0.015625\n"
                  "0.0625\n"
                  "0.015625\n"
                  "0\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0\n"
                  "0.015625\n"
                  "0\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.078125\n"
                  "0.015625\n"
                  "0.0625\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.0625\n"
                  "0.03125\n"
                  "0\n"
                  "0\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.0625\n"
                  "0\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0\n"
                  "0\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "-0.03125\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.0625\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.0625\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.078125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "-0.015625\n"
                  "0\n"
                  "0.0625\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.078125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.078125\n"
                  "0.0625\n"
                  "0\n"
                  "0\n"
                  "0\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0.0625\n"
                  "0.015625\n"
                  "-0.015625\n"
                  "-0.015625\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.0625\n"
                  "0\n"
                  "0.046875\n"
                  "0\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.0625\n"
                  "0.03125\n"
                  "0\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0\n"
                  "0.046875\n"
                  "-0.015625\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.078125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0\n"
                  "-0.015625\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.0625\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0.0625\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0\n"
                  "0\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.0625\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.0625\n"
                  "0\n"
                  "0.046875\n"
                  "0.078125\n"
                  "0.0625\n"
                  "0.0625\n"
                  "-0.03125\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0\n"
                  "0.03125\n"
                  "0.0625\n"
                  "0.046875\n"
                  "0.0625\n"
                  "0.046875\n"
                  "0\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0\n"
                  "0.03125\n"
                  "0\n"
                  "0.046875\n"
                  "0\n"
                  "0.078125\n"
                  "0.015625\n"
                  "0\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0\n"
                  "0.0625\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.0625\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.0625\n"
                  "0.078125\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.0625\n"
                  "0.03125\n"
                  "0.0625\n"
                  "-0.015625\n"
                  "0\n"
                  "0.0625\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0\n"
                  "0.046875\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.0625\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.0625\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0\n"
                  "0\n"
                  "-0.03125\n"
                  "-0.046875\n"
                  "0.078125\n"
                  "0.03125\n"
                  "-0.078125\n"
                  "0.046875\n"
                  "0.046875\n"
                  "-0.171875\n"
                  "0.203125\n"
                  "0.03125\n"
                  "0\n"
                  "0.078125\n"
                  "0.25\n"
                  "-0.078125\n"
                  "0\n"
                  "-0.4375\n"
                  "0.0625\n"
                  "-0.21875\n"
                  "0.0625\n"
                  "0.171875\n"
                  "0.109375\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.140625\n"
                  "0.109375\n"
                  "0.03125\n"
                  "0.21875\n"
                  "-0.109375\n"
                  "0\n"
                  "0.21875\n"
                  "-0.109375\n"
                  "0.078125\n"
                  "0.078125\n"
                  "0.296875\n"
                  "0.0625\n"
                  "0.09375\n"
                  "-0.046875\n"
                  "-0.265625\n"
                  "-0.109375\n"
                  "-0.015625\n"
                  "-0.109375\n"
                  "-0.015625\n"
                  "0.03125\n"
                  "-0.046875\n"
                  "-0.203125\n"
                  "0\n"
                  "0.0625\n"
                  "-0.1875\n"
                  "0.234375\n"
                  "0.140625\n"
                  "0.453125\n"
                  "0.140625\n"
                  "0.1875\n"
                  "0\n"
                  "0.328125\n"
                  "0.015625\n"
                  "0.46875\n"
                  "-0.078125\n"
                  "0.03125\n"
                  "-0.0625\n"
                  "-0.0625\n"
                  "0.03125\n"
                  "0.203125\n"
                  "-0.125\n"
                  "0.296875\n"
                  "-0.34375\n"
                  "0.359375\n"
                  "-0.109375\n"
                  "0.203125\n"
                  "0.09375\n"
                  "-0.21875\n"
                  "0.390625\n"
                  "0.09375\n"
                  "0.140625\n"
                  "0.6875\n"
                  "0.046875\n"
                  "-0.140625\n"
                  "0.046875\n"
                  "-0.0625\n"
                  "0.0625\n"
                  "0.171875\n"
                  "-0.046875\n"
                  "0.296875\n"
                  "-0.109375\n"
                  "-0.15625\n"
                  "-0.03125\n"
                  "-0.21875\n"
                  "0.125\n"
                  "-0.109375\n"
                  "0.578125\n"
                  "-0.09375\n"
                  "-0.140625\n"
                  "-0.203125\n"
                  "0.234375\n"
                  "-0.140625\n"
                  "-0.046875\n"
                  "-0.03125\n"
                  "-0.09375\n"
                  "0.109375\n"
                  "-0.015625\n"
                  "0.28125\n"
                  "0\n"
                  "0.09375\n"
                  "0.171875\n"
                  "0.03125\n"
                  "0.125\n"
                  "0.203125\n"
                  "-0.4375\n"
                  "0.203125\n"
                  "-0.21875\n"
                  "0.203125\n"
                  "-0.296875\n"
                  "-0.3125\n"
                  "0.0625\n"
                  "0.296875\n"
                  "-0.15625\n"
                  "-0.09375\n"
                  "0.203125\n"
                  "0.015625\n"
                  "0.140625\n"
                  "0.203125\n"
                  "-0.0625\n"
                  "0.171875\n"
                  "-0.515625\n"
                  "-0.328125\n"
                  "-0.375\n"
                  "0.171875\n"
                  "-0.03125\n"
                  "0.234375\n"
                  "0.390625\n"
                  "0.125\n"
                  "-0.34375\n"
                  "0.03125\n"
                  "0\n"
                  "-0.21875\n"
                  "0.21875\n"
                  "0.171875\n"
                  "-0.328125\n"
                  "-0.109375\n"
                  "0.078125\n"
                  "0.03125\n"
                  "0.1875\n"
                  "-0.234375\n"
                  "0.109375\n"
                  "0.140625\n"
                  "-0.390625\n"
                  "-0.046875\n"
                  "0.03125\n"
                  "0.203125\n"
                  "-0.03125\n"
                  "0.5\n"
                  "-0.34375\n"
                  "-0.078125\n"
                  "0.125\n"
                  "0.078125\n"
                  "-0.296875\n"
                  "0\n"
                  "0.0625\n"
                  "-0.234375\n"
                  "0.046875\n"
                  "-0.328125\n"
                  "-0.203125\n"
                  "0.078125\n"
                  "0.203125\n"
                  "0.453125\n"
                  "0.171875\n"
                  "0.375\n"
                  "0.296875\n"
                  "0\n"
                  "0.296875\n"
                  "0.015625\n"
                  "0.34375\n"
                  "-0.34375\n"
                  "-0.140625\n"
                  "0.546875\n"
                  "-0.53125\n"
                  "0.375\n"
                  "-0.140625\n"
                  "0.609375\n"
                  "-0.09375\n"
                  "-0.09375\n"
                  "0.328125\n"
                  "-0.34375\n"
                  "0.140625\n"
                  "0.71875\n"
                  "-0.140625\n"
                  "0.078125\n"
                  "0.015625\n"
                  "-0.03125\n"
                  "-0.03125\n"
                  "0.171875\n"
                  "-0.59375\n"
                  "0.375\n"
                  "-0.296875\n"
                  "-0.015625\n"
                  "0.171875\n"
                  "0.328125\n"
                  "-0.03125\n"
                  "-0.09375\n"
                  "0.125\n"
                  "-0.03125\n"
                  "-0.578125\n"
                  "0.15625\n"
                  "0.078125\n"
                  "-0.046875\n"
                  "0.21875\n"
                  "0.203125\n"
                  "0.125\n"
                  "-0.03125\n"
                  "-0.03125\n"
                  "-0.0625\n"
                  "-0.15625\n"
                  "-0.125\n"
                  "0.15625\n"
                  "-0.0625\n"
                  "-0.1875\n"
                  "0.3125\n"
                  "0.390625\n"
                  "0.4375\n"
                  "0.515625\n"
                  "0.375\n"
                  "0.046875\n"
                  "-0.328125\n"
                  "0.3125\n"
                  "0.0625\n"
                  "-0.03125\n"
                  "0.0625\n"
                  "0.1875\n"
                  "-0.078125\n"
                  "-0.046875\n"
                  "0.046875\n"
                  "-0.203125\n"
                  "0.328125\n"
                  "-0.09375\n"
                  "-0.03125\n"
                  "-0.03125\n"
                  "-0.21875\n"
                  "0.109375\n"
                  "-0.1875\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.28125\n"
                  "-0.0625\n"
                  "0.15625\n"
                  "-0.03125\n"
                  "0.046875\n"
                  "-0.203125\n"
                  "0.421875\n"
                  "-0.21875\n"
                  "0.109375\n"
                  "-0.0625\n"
                  "-0.03125\n"
                  "0.234375\n"
                  "0.03125\n"
                  "0.109375\n"
                  "-0.140625\n"
                  "0.4375\n"
                  "-0.375\n"
                  "0.0625\n"
                  "-0.234375\n"
                  "0.109375\n"
                  "0.6875\n"
                  "0.453125\n"
                  "0.234375\n"
                  "-0.109375\n"
                  "-0.5\n"
                  "-0.046875\n"
                  "0.296875\n"
                  "0.015625\n"
                  "0.03125\n"
                  "-0.0625\n"
                  "-0.0625\n"
                  "-0.078125\n"
                  "-0.15625\n"
                  "-0.1875\n"
                  "0.34375\n"
                  "0.125\n"
                  "-0.109375\n"
                  "0.21875\n"
                  "0\n"
                  "-0.140625\n"
                  "-0.078125\n"
                  "-0.25\n"
                  "0.25\n"
                  "0.21875\n"
                  "-0.078125\n"
                  "0.078125\n"
                  "-0.1875\n"
                  "-0.0625\n"
                  "-0.0625\n"
                  "-0.03125\n"
                  "0.09375\n"
                  "-0.046875\n"
                  "0.21875\n"
                  "-0.34375\n"
                  "0.234375\n"
                  "0.375\n"
                  "0.375\n"
                  "-0.0625\n"
                  "-0.3125\n"
                  "0.171875\n"
                  "0.40625\n"
                  "-0.25\n"
                  "0.234375\n"
                  "-0.1875\n"
                  "-0.375\n"
                  "0.3125\n"
                  "-0.125\n"
                  "0.40625\n"
                  "-0.03125\n"
                  "0\n"
                  "0.046875\n"
                  "-0.046875\n"
                  "-0.46875\n"
                  "-0.140625\n"
                  "-0.1875\n"
                  "0.5625\n"
                  "0.3125\n"
                  "0.234375\n"
                  "-0.40625\n"
                  "-0.328125\n"
                  "0.171875\n"
                  "-0.078125\n"
                  "0.484375\n"
                  "-0.40625\n"
                  "0.0625\n"
                  "-0.0625\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.53125\n"
                  "0.25\n"
                  "-0.5\n"
                  "-0.25\n"
                  "0.203125\n"
                  "-0.140625\n"
                  "-0.046875\n"
                  "0.3125\n"
                  "-0.125\n"
                  "-0.078125\n"
                  "0.15625\n"
                  "-0.09375\n"
                  "0.265625\n"
                  "0.125\n"
                  "0.21875\n"
                  "0.015625\n"
                  "-0.171875\n"
                  "0.171875\n"
                  "-0.046875\n"
                  "0.03125\n"
                  "0.125\n"
                  "-0.1875\n"
                  "-0.109375\n"
                  "0.578125\n"
                  "0.078125\n"
                  "-0.484375\n"
                  "0.15625\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.140625\n"
                  "0.125\n"
                  "-0.109375\n"
                  "0.046875\n"
                  "0.25\n"
                  "-0.09375\n"
                  "0.078125\n"
                  "-0.109375\n"
                  "0\n"
                  "-0.078125\n"
                  "-0.25\n"
                  "0.1875\n"
                  "0.484375\n"
                  "0.375\n"
                  "-0.09375\n"
                  "0.203125\n"
                  "0.4375\n"
                  "-0.453125\n"
                  "0.1875\n"
                  "0.234375\n"
                  "0.03125\n"
                  "0.078125\n"
                  "-0.046875\n"
                  "-0.03125\n"
                  "0.25\n"
                  "-0.234375\n"
                  "-0.296875\n"
                  "0.0625\n"
                  "-0.03125\n"
                  "0.078125\n"
                  "0.109375\n"
                  "0.34375\n"
                  "-0.28125\n"
                  "-0.046875\n"
                  "-0.234375\n"
                  "-0.25\n"
                  "0.265625\n"
                  "-0.140625\n"
                  "0.265625\n"
                  "0.140625\n"
                  "-0.140625\n"
                  "0.328125\n"
                  "0.21875\n"
                  "-0.203125\n"
                  "0.1875\n"
                  "-0.234375\n"
                  "0.296875\n"
                  "0.28125\n"
                  "-0.203125\n"
                  "-0.21875\n"
                  "0.21875\n"
                  "-0.015625\n"
                  "-0.015625\n"
                  "0.046875\n"
                  "-0.15625\n"
                  "0.078125\n"
                  "0.140625\n"
                  "-0.078125\n"
                  "0.140625\n"
                  "0\n"
                  "-0.234375\n"
                  "0.09375\n"
                  "0\n"
                  "0.078125\n"
                  "0.203125\n"
                  "-0.015625\n"
                  "0.03125\n"
                  "0.078125\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0\n"
                  "0.15625\n"
                  "-0.140625\n"
                  "-0.015625\n"
                  "0.046875\n"
                  "-0.140625\n"
                  "0.15625\n"
                  "-0.359375\n"
                  "0.09375\n"
                  "-0.09375\n"
                  "0.09375\n"
                  "0.1875\n"
                  "0.109375\n"
                  "0\n"
                  "0.0625\n"
                  "0.125\n"
                  "0.171875\n"
                  "0.09375\n"
                  "0.125\n"
                  "0\n"
                  "0.078125\n"
                  "0.015625\n"
                  "0.0625\n"
                  "-0.03125\n"
                  "0.09375\n"
                  "-0.109375\n"
                  "0.140625\n"
                  "0.1875\n"
                  "0.109375\n"
                  "0\n"
                  "-0.21875\n"
                  "0.0625\n"
                  "-0.40625\n"
                  "0.28125\n"
                  "-0.1875\n"
                  "0.21875\n"
                  "-0.046875\n"
                  "0.03125\n"
                  "0.078125\n"
                  "0.046875\n"
                  "-0.03125\n"
                  "0.046875\n"
                  "0.015625\n"
                  "-0.109375\n"
                  "-0.015625\n"
                  "-0.015625\n"
                  "0.109375\n"
                  "-0.046875\n"
                  "-0.015625\n"
                  "0.265625\n"
                  "-0.109375\n"
                  "-0.3125\n"
                  "-0.265625\n"
                  "-0.390625\n"
                  "0.390625\n"
                  "-0.296875\n"
                  "0.078125\n"
                  "-0.109375\n"
                  "0.015625\n"
                  "0.109375\n"
                  "0.046875\n"
                  "0.0625\n"
                  "0.015625\n"
                  "0\n"
                  "0.015625\n"
                  "0.03125\n"
                  "0.0625\n"
                  "0.109375\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.015625\n"
                  "0.0625\n"
                  "0.046875\n"
                  "0.0625\n"
                  "0.03125\n"
                  "0.0625\n"
                  "-0.015625\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "-0.015625\n"
                  "0.03125\n"
                  "0\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.015625\n"
                  "0.140625\n"
                  "-0.03125\n"
                  "-0.078125\n"
                  "0.109375\n"
                  "-0.03125\n"
                  "0.046875\n"
                  "0\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0.03125\n"
                  "0\n"
                  "0.078125\n"
                  "0.046875\n"
                  "0.03125\n"
                  "0.046875\n"
                  "0.015625\n"
                  "0\n"
                  "0.03125\n"
                  "0.0625\n"
                  "0.046875";

int DataProcessor_Initialize(){
    printf("Initializing Linked List... \r\n");

    lp = (List *) malloc(sizeof(List));
    initList(lp);

    printf("Initialized Linked List \r\n");

}

int DataProcessor_ReadData(){
    printf("Reading data..\r\n");
    char* pch = NULL;

    pch = strtok(mock_csv, "\n");

    while (pch != NULL)
    {
        addAtTail(lp, atof(pch));
        pch = strtok(NULL, "\n");
    }
    printf("Done reading data..\r\n");

    return 0;
}

//TODO: Add comments
int DataProcessor_ProcessData() {
    int listLength = getListLength(lp);
    int nodeIndex = 0;
    float currentSum = 0;

    //Calculate absolute value
    Node *n = lp->head;
    do {
        Node *sumNode = n;

        for (int i = 0; i < 40; i++) {
            currentSum += fabs(sumNode->item);
            sumNode = sumNode->next;
            if (sumNode == NULL)
                break;
        }
        n->item = currentSum / 40;
        nodeIndex++;
        n = n->next;
        currentSum = 0;
    } while (nodeIndex < listLength - 40);

    //Remove last 40 nodes
    for(int i=0; i<40; i++){
        delFromTail(lp);
    }
}

//TODO: Check initial hand position (physical)
int DataProcessor_CheckThreshold(){ //TODO: Check head is not null
    printf("Checking threshold..\r\n");
    Node *n = lp->head;
    printf("Head: %f\n", lp->head->item);

    int isClenched;


    if(n->item >= THRESHOLD){
        DataProcessor_CompleteAction(CLENCH);
        isClenched = 1;
    } else {
//        DataProcessor_CompleteAction(RELEASE);
        isClenched = 0;
    }

    while (n->next){ //TODO: not addressing last values
        printf("%f, \r\n", n->item);
        if(n->item >= 0.15 && isClenched == 0){
            DataProcessor_CompleteAction(CLENCH);
            isClenched = 1;
        } else if(n->item < 0.1 && isClenched == 1){
            DataProcessor_CompleteAction(RELEASE);
            isClenched = 0;
        }
        n = n->next;
        HAL_Delay(10);
    }
}

int DataProcessor_CompleteAction(int action){
    if(action == 1){
        printf("CLENCHING\r\n");
        char *arg = "4";
        char* arguments[5];
        arguments[0] = arg;

        CommandHandler_ServoClench(arguments);
    } else {
        printf("RELEASING\r\n");
        char *arg = "4";
        char* arguments[5];
        arguments[0] = arg;

        CommandHandler_ServoRelease(arguments);
    }
}